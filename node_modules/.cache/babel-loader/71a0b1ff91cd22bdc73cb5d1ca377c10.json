{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\new-frontend\\\\online-store\\\\src\\\\screens\\\\CartScreen.js\",\n    _s = $RefreshSig$();\n\nimport \"./CartScreen.css\";\nimport React from \"react\"; //import ReactDOM from \"react-dom\";\n\nimport { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\"; // Components\n\nimport CartItem from \"../components/CartItem\"; // Actions\n\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\nimport \"react-toastify/dist/ReactToastify.css\"; //impor \"./styles.css\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ntoast.configure();\n\nconst CartScreen = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems\n  } = cart;\n  useEffect(() => {}, []);\n\n  const qtyChangeHandler = (id, qty) => {\n    dispatch(addToCart(id, qty));\n  };\n\n  const removeFromCartHandler = id => {\n    dispatch(removeFromCart(id));\n  };\n\n  const getCartCount = () => {\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\n  };\n\n  const getCartSubTotal = () => {\n    return cartItems.reduce((price, item) => price + item.price * item.qty, 0).toFixed(2);\n  };\n\n  const price = getCartSubTotal();\n  const [product] = React.useState({\n    name: \"Tesla Roadster\",\n    price: price,\n    description: \"Cool car\"\n  });\n\n  async function handleToken(token, addresses) {\n    console.log({\n      token,\n      addresses\n    });\n    const response = await axios.post(\"https://backend-dos.herokuapp.com/cart\", {\n      token,\n      product\n    });\n    const {\n      status\n    } = response.data;\n    console.log(\"Response:\", response.data);\n\n    if (status === \"success\") {\n      toast(\"Success! Check email for details\", {\n        type: \"success\"\n      });\n    } else {\n      toast(\"Something went wrong\", {\n        type: \"error\"\n      });\n    }\n  }\n\n  ; //console.log(price);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartscreen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartscreen__left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shopping Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Your Cart Is Empty \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Go Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this) : cartItems.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n          item: item,\n          qtyChangeHandler: qtyChangeHandler,\n          removeHandler: removeFromCartHandler\n        }, item.product, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartscreen__right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartscreen__info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Subtotal (\", getCartCount(), \") items\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", getCartSubTotal()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(StripeCheckout, {\n            stripeKey: \"pk_test_51KNXCBIIQnKtwtkJ7y26OKUg6U2JAlMMqOjcMBn555yuTWEEU24g7Ulgi0dtm0b39QM4mAcfHgcoq9IsfvfcwDOQ00B4JaYIUd\",\n            token: handleToken,\n            billingAddress: true,\n            shippingAddress: true,\n            amount: price * 100,\n            name: \"Books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Checkout with M-Pesa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CartScreen, \"b5ihP0qLvskc33UAn7R5MWbA/XM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = CartScreen;\nexport default CartScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartScreen\");","map":{"version":3,"sources":["C:/Users/user/new-frontend/online-store/src/screens/CartScreen.js"],"names":["React","useEffect","useSelector","useDispatch","Link","StripeCheckout","axios","toast","CartItem","addToCart","removeFromCart","configure","CartScreen","dispatch","cart","state","cartItems","qtyChangeHandler","id","qty","removeFromCartHandler","getCartCount","reduce","item","Number","getCartSubTotal","price","toFixed","product","useState","name","description","handleToken","token","addresses","console","log","response","post","status","data","type","length","map"],"mappings":"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","sourcesContent":["import \"./CartScreen.css\";\r\nimport React from \"react\";\r\n//import ReactDOM from \"react-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StripeCheckout from 'react-stripe-checkout';\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n// Components\r\nimport CartItem from \"../components/CartItem\";\r\n\r\n// Actions\r\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\r\nimport \"react-toastify/dist/ReactToastify.css\"; \r\n//impor \"./styles.css\";\r\n\r\ntoast.configure();\r\n\r\n\r\n\r\nconst CartScreen = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  const qtyChangeHandler = (id, qty) => {\r\n    dispatch(addToCart(id, qty));\r\n  };\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  const getCartCount = () => {\r\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\r\n  };\r\n\r\n  const getCartSubTotal = () => {\r\n    return cartItems\r\n      .reduce((price, item) => price + item.price * item.qty, 0)\r\n      .toFixed(2);\r\n  };\r\n\r\n  const price = getCartSubTotal();\r\n\r\n  const [product] = React.useState({\r\n    name: \"Tesla Roadster\",\r\n    price: price,\r\n    description: \"Cool car\"\r\n  });\r\n  async function handleToken(token, addresses) {\r\n\t  console.log({ token, addresses });\r\n\t  const response = await axios.post(\r\n\t\t\"https://backend-dos.herokuapp.com/cart\",\r\n\t\t{ token, product }\r\n\t  );\r\n\t  const { status } = response.data;\r\n\t  console.log(\"Response:\", response.data);\r\n\t  if (status === \"success\") {\r\n\t\ttoast(\"Success! Check email for details\", { type: \"success\" });\r\n\t  } else {\r\n\t\ttoast(\"Something went wrong\", { type: \"error\" });\r\n\t  }\r\n  };\r\n  \r\n  //console.log(price);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"cartscreen\">\r\n        <div className=\"cartscreen__left\">\r\n          <h2>Shopping Cart</h2>\r\n\r\n          {cartItems.length === 0 ? (\r\n            <div>\r\n              Your Cart Is Empty <Link to=\"/\">Go Back</Link>\r\n            </div>\r\n          ) : (\r\n            cartItems.map((item) => (\r\n              <CartItem\r\n                key={item.product}\r\n                item={item}\r\n                qtyChangeHandler={qtyChangeHandler}\r\n                removeHandler={removeFromCartHandler}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"cartscreen__right\">\r\n          <div className=\"cartscreen__info\">\r\n            <p>Subtotal ({getCartCount()}) items</p>\r\n            <p>${getCartSubTotal()}</p>\r\n          </div>\r\n          <div>\r\n            <StripeCheckout\r\n\t\t\tstripeKey=\"pk_test_51KNXCBIIQnKtwtkJ7y26OKUg6U2JAlMMqOjcMBn555yuTWEEU24g7Ulgi0dtm0b39QM4mAcfHgcoq9IsfvfcwDOQ00B4JaYIUd\" \r\n\t\t\ttoken={handleToken}\r\n\t\t\tbillingAddress\r\n\t\t\tshippingAddress\r\n\t\t\tamount={price * 100}\r\n\t\t\tname=\"Books\"\r\n\t\t\t/>\r\n          </div>\r\n\t\t  <div>\r\n            <button>Checkout with M-Pesa</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}